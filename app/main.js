(()=>{"use strict";class e{constructor(){}printEventForm(e){return`\n        <div class="border border-secondary rounded p-3" id="event${e}">\n            <div class="row justify-content-center mb-1">\n                <div class="col-md-6">\n                    <label class="form-label">Nombre del evento</label>\n                    <input type="text" class="form-control" id="name${e}"\n                        placeholder="Ejemplo: Padres del protagonista son asesinados">\n                </div>\n                <div class="col-md-4 row">\n                    <div class="col">\n                        <label class="form-label">Día</label>\n                        <input type="text" class="form-control" id="day${e}" placeholder="31">\n                    </div>\n                    <div class="col">\n                        <label class="form-label">Mes</label>\n                        <input type="text" class="form-control" id="month${e}" placeholder="12"\n                            aria-label="Last name">\n                    </div>\n                    <div class="col">\n                        <label class="form-label">Año</label>\n                        <input type="text" class="form-control" id="year${e}" placeholder="1999"\n                            aria-label="Last name">\n                    </div>\n                </div>\n                <div class="col-md-2 row">\n                    <label class="form-label">Hora y min</label>\n                    <div class="input-group mb-3">\n                        <input type="text" class="form-control" id="hour${e}" placeholder="23"\n                            aria-label="Username">\n                        <span class="input-group-text">:</span>\n                        <input type="text" class="form-control" id="min${e}" placeholder="59"\n                            aria-label="Server">\n                    </div>\n                </div>\n            </div>\n            <div class="form-floating mx-3">\n                <textarea class="form-control" placeholder="Descripción del evento"\n                    id="desc${e}"></textarea>\n                <label for="desc">Descripción del evento</label>\n            </div>\n        </div>\n        `}printSingleEvent(e,n){e.name,e.day,e.month,e.year,e.hour,e.min,e.desc}}class n{constructor(){this.TimelineCreation=new e}}class t{name=null;subname=null;events=[];code=null;constructor(e=null){if(null!==e){let n=e.split(";");this.name=n[0],this.subname=n[1];let t=n[2].split("/");this.events=new Array(t.length),t.forEach(((e,n)=>{let t=e.split("|");this.events[n]={},this.events[n].day=parseInt(t[0]),this.events[n].month=parseInt(t[1]),this.events[n].year=parseInt(t[2]),this.events[n].hour=parseInt(t[3]),this.events[n].min=parseInt(t[4]),this.events[n].name=t[5],this.events[n].desc=t[6]}))}}getName=()=>this.name;dataToString=()=>{let e="";return e=this.pyc(e,this.name),e=this.pyc(e,this.subname),e=this.sla(e,this.events,!0),e};pyc(e,n){return e+(n+";")}sla(e,n,t=!1){let i="",l=!1;return n.forEach((e=>{l&&(i+="/"),i+=e.day+"|",i+=e.month+"|",i+=e.year+"|",i+=e.hour+"|",i+=e.min+"|",i+=e.name+"|",i+=e.desc,l=!0})),e+=i,t||(e+=";"),e}}new class{constructor(){this.TimelineCreation={BTN:{},AREA:{},INPUT:{}},this.VIEW=new n,this.eventCount=0,this.loadHTML(),this.DOMevents(),this.printNewEventForm()}loadHTML(){this.TimelineCreation.BTN.addEvent=document.querySelector("#addEventBTN"),this.TimelineCreation.BTN.saveTimeline=document.querySelector("#saveTimelineBTN"),this.TimelineCreation.BTN.generateTimeline=document.querySelector("#generateTimelineBTN"),this.TimelineCreation.AREA.events=document.querySelector("#eventDataArea"),this.TimelineCreation.INPUT.timelineCode=document.querySelector("#timelineCode"),this.TimelineCreation.INPUT.timelineModCode=document.querySelector("#timelineModCode"),this.TimelineCreation.INPUT.timelineName=document.querySelector("#timelineName"),this.TimelineCreation.INPUT.timelineSubname=document.querySelector("#subname")}DOMevents(){this.TimelineCreation.BTN.addEvent.addEventListener("click",(()=>{this.printNewEventForm()})),this.TimelineCreation.BTN.saveTimeline.addEventListener("click",(()=>{this.saveTimeline()})),this.TimelineCreation.BTN.generateTimeline.addEventListener("click",(()=>{let e=this.TimelineCreation.INPUT.timelineModCode.value;this.TimelineCREATED=new t(e),this.createFromClass()}))}printNewEventForm(){let e=this.VIEW.TimelineCreation.printEventForm(this.eventCount);this.TimelineCreation.AREA.events.insertAdjacentHTML("beforeend",e),this.eventCount++}saveTimeline(){this.TimelineCREATED=new t,this.TimelineCREATED.name=this.TimelineCreation.INPUT.timelineName.value,this.TimelineCREATED.subname=this.TimelineCreation.INPUT.timelineSubname.value;let e=new Array(this.eventCount);for(let n=0;n<this.eventCount;n++)e[n]={},e[n].name=document.querySelector("#name"+n).value,e[n].day=document.querySelector("#day"+n).value,e[n].month=document.querySelector("#month"+n).value,e[n].year=document.querySelector("#year"+n).value,e[n].hour=document.querySelector("#hour"+n).value,e[n].min=document.querySelector("#min"+n).value,e[n].desc=document.querySelector("#desc"+n).value;this.TimelineCREATED.events=e,this.TimelineCreation.INPUT.timelineCode.value=this.TimelineCREATED.dataToString()}deleteEventsArea(){this.eventsArea.innerHTML=""}createFromClass(){this.TimelineCreation.INPUT.timelineName.value=this.TimelineCREATED.name,this.TimelineCreation.INPUT.timelineSubname.value=this.TimelineCREATED.subname,this.eventCount=this.TimelineCREATED.events.length,this.TimelineCreation.AREA.events.innerHTML="",this.TimelineCREATED.events.forEach(((e,n)=>{let t=this.VIEW.TimelineCreation.printSingleEvent(e,n);this.TimelineCreation.AREA.events.insertAdjacentHTML("beforeend",t)}))}};let i=document.querySelector("#yearSpan"),l=(new Date).getFullYear();i.innerHTML=l})();